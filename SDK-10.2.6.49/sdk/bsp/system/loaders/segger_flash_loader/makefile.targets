.PHONY: generate_ldscripts FORCE

FORCE:

generate_ldscripts : mem.ld sections.ld

%.ld : $(LDSCRIPT_PATH)/%.ld.h
	@echo "Generating $@ ..."
	"$(CC)" -I "$(BSP_CONFIG_DIR)" -imacros "$(APP_CONFIG_H)" $(LD_DEFS) -Ddg_configDEVICE=$(DEVICE) -MMD -MP -MF"$(@:%=%.d)" -MT"$(@)" -E -P -c "$<" -o "$@"

-include mem.ld.d
-include sections.ld.d

ifneq ($(HAVE_LDSCRIPTS),1)
segger_flash_loader.elf : mem.ld sections.ld
endif